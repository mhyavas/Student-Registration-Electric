{"version":3,"sources":["demo/seven_gui_4_timer.cljc"],"mappings":";AAOA,sCAAA,tCAAKA;AAEL,iCAAA,jCAAMC,0EAASC;AAAf,AAA6B,6CAAA,rCAAG,AAACC,WAAW,gBAAA,fAAGD;;AAE/C,0CAAA,1CAAME,4FAAkBF;AAAxB,oBAA0CA,DAAa,gBAAA,3BAAS,AAACC,RAAY,8CAAA;;AAE7E,6BAAA,7BAAME;AAAN,AAAsB,OAACD,wCAAiB,AAACE;;AAEzC","names":["demo.seven-gui-4-timer/initial-goal","demo.seven-gui-4-timer/seconds","milliseconds","Math/floor","demo.seven-gui-4-timer/second-precision","demo.seven-gui-4-timer/now","js/Date.now"],"sourcesContent":["(ns demo.seven-gui-4-timer\r\n  (:require [hyperfiddle.electric :as e]\r\n            [hyperfiddle.electric-dom2 :as dom]\r\n            [hyperfiddle.electric-ui4 :as ui4]))\r\n\r\n;; https://eugenkiss.github.io/7guis/tasks#timer\r\n\r\n(def initial-goal 10)                ; s\r\n\r\n(defn seconds [milliseconds] (/ (Math/floor (/ milliseconds 100)) 10))\r\n\r\n(defn second-precision [milliseconds] (-> milliseconds (/ 1000) (Math/floor) (* 1000))) ; drop milliseconds\r\n\r\n(defn now [] #?(:cljs (second-precision (js/Date.now))))\r\n\r\n(e/defn Timer []\r\n  (e/client\r\n    (dom/h1 (dom/text \"7 GUIs: Timer\"))\r\n    (let [!goal (atom initial-goal)\r\n          !start (atom (now))\r\n          goal (e/watch !goal)\r\n          goal-ms (* 1000 goal)\r\n          start (e/watch !start)\r\n          time (min goal-ms (- (second-precision e/system-time-ms) start))]\r\n      (dom/div (dom/props {:style {:display :grid\r\n                                        ;:margin-left \"20rem\"\r\n                                    :width \"20em\"\r\n                                    :grid-gap \"0 1rem\"\r\n                                    :align-items :center}})\r\n        (dom/span (dom/text \"Elapsed Time:\"))\r\n        (dom/progress (dom/props {:max goal-ms, :value time, :style {:grid-column 2}}))\r\n        (dom/span (dom/text (seconds time) \" s\"))\r\n        (dom/span (dom/props {:style {:grid-row 3}}) (dom/text \"Duration: \" goal \"s\"))\r\n        (ui4/range goal (e/fn [v] (reset! !goal v))\r\n          (dom/props {:min 0, :max 60, :style {:grid-row 3}}))\r\n        (ui4/button (e/fn [] (reset! !start (now)))\r\n          (dom/props {:style {:grid-row 4, :grid-column \"1/3\"}})\r\n          (dom/text \"Reset\"))))))\r\n"]}